<!-- Local HTML template loaded by WebView; replace its contents to customize the app. -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Flag Football Tracker (Touch)</title>
  <link rel="stylesheet" href="styles/app.css" />

  <!-- Firebase (compat) SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

  <script src="scripts/firebase-init.js"></script>


</head>
<body>
<script src="scripts/error-handler.js"></script>

  <header class="topbar">
    <button class="menu-toggle" id="menuToggle" aria-label="Open menu" aria-expanded="false">☰</button>
    <div class="topbar-title">Synqro Game Tracker</div>
    <div class="view-indicator" id="viewIndicator">Game dashboard</div>
  </header>

  <nav class="drawer" id="menuDrawer" aria-hidden="true">
    <div class="drawer-section">
      <h2>Pages</h2>
      <button class="drawer-item active" data-page="game" data-view="ref" type="button">Game dashboard</button>
      <button class="drawer-item" data-page="game" data-view="player" type="button">Scoreboard</button>
      <p class="drawer-note">Game dashboard lets refs manage the game. Scoreboard is a read-only view for players and spectators.</p>
    </div>

    <div class="drawer-section">
      <h2>Live sync</h2>
      <form id="syncForm">
        <label for="syncGame">Game code</label>
        <input id="syncGame" name="game" type="text" placeholder="e.g. week1-field1" />
        <button class="save" type="submit">Save &amp; connect</button>
      </form>
      <button class="secondary" type="button" id="syncDisconnect">Disconnect</button>
      <p class="drawer-note">
        Enter a game code to join or host a game. Everyone connected can manage the game.
      </p>
      <div class="sync-status" id="syncStatus" role="status">Offline</div>

    </div>

    <div class="drawer-section">
      <h2>Account</h2>
      <button class="drawer-item drawer-item--danger" type="button" id="menuSignOut">Sign out</button>
    </div>
  </nav>
  <div class="drawer-backdrop" id="menuBackdrop" tabindex="-1" aria-hidden="true"></div>

  <div class="app">
    <section class="page active" data-page="game">

      <div class="game-board">
        <div class="scoreboard-shell">
          <div class="scoreboard">
            <section class="team-card" id="teamCard0"></section>

            <div class="clock-card">
              <div class="banner" id="timeoutBanner" style="display:none;">Timeout — <span id="timeoutTeam"></span> <span id="timeoutTime">1:00</span></div>
              <div class="clock-tiles">
                <div class="clock-tile">
                  <div class="time" id="gameTime" title="Tap to edit when paused">25:00</div>
                </div>
                <div class="down-tile">
                  <div class="down-controls">
                    <div class="down-label" aria-hidden="true">Down</div>
                    <div class="down-value" id="downValue" aria-live="polite">1</div>
                  </div>
                </div>
              </div>
              <div class="girl-indicator">
                <div class="girl-track" id="girlPlayTrack" aria-hidden="true">
                  <span></span>
                  <span></span>
                </div>
                <span id="girlPlayText" class="sr-only">Girl play in 2</span>
              </div>
            </div>

            <section class="team-card" id="teamCard1"></section>
          </div>
        </div>

        <div class="control-carousel" id="controlCarousel" data-active-index="0">
          <div class="control-track">
            <div class="control-panel is-active" data-panel-index="0" aria-label="Clock controls" aria-hidden="false">
              <div class="clock-actions">
                <div class="action-stack">
                  <button class="btn" id="timeoutHome" data-role="ref-only">Timeout</button>
                  <button class="btn" id="blitzHome" data-role="ref-only">Blitz</button>
                </div>
                <button class="btn primary start-btn" id="clockStartPause" data-role="ref-only">Start</button>
                <div class="action-stack">
                  <button class="btn" id="timeoutAway" data-role="ref-only">Timeout</button>
                  <button class="btn" id="blitzAway" data-role="ref-only">Blitz</button>
                </div>
              </div>
            </div>
            <div class="control-panel" data-panel-index="1" aria-label="Manual adjustments" aria-hidden="true">
              <div class="manual-adjust" data-role="ref-only">
                <div class="adjust-card" data-kind="timeouts">
                  <div class="adjust-title">Timeout</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="timeouts" data-adjust="-1" aria-label="Decrease timeouts">-</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="timeouts" data-adjust="1" aria-label="Increase timeouts">+</button>
                  </div>
                </div>
                <div class="adjust-card" data-kind="rushes">
                  <div class="adjust-title">Blitz</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="rushes" data-adjust="-1" aria-label="Decrease blitzes">-</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="rushes" data-adjust="1" aria-label="Increase blitzes">+</button>
                  </div>
                </div>
                <div class="adjust-card" data-kind="girlPlay">
                  <div class="adjust-title">Girl Play</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="girlPlay" data-adjust="-1" aria-label="Decrease girl plays">-</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="girlPlay" data-adjust="1" aria-label="Increase girl plays">+</button>
                  </div>
                </div>
                <div class="adjust-card" data-kind="downs">
                  <div class="adjust-title">Down</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="downs" data-adjust="-1" aria-label="Previous down">-</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="downs" data-adjust="1" aria-label="Next down">+</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="control-pagination" id="controlCarouselPagination">
            <button class="control-dot is-active" type="button" data-index="0" aria-label="Clock controls" aria-pressed="true"></button>
            <button class="control-dot" type="button" data-index="1" aria-label="Manual adjustments" aria-pressed="false"></button>
          </div>
        </div>

        <div class="score-actions" data-role="ref-only">
          <div class="score-row">
            <button class="btn primary" id="g_score6" data-role="ref-only">+6</button>
            <button class="btn" id="g_score1" data-role="ref-only">+1</button>
            <button class="btn warn" id="g_scorem1" data-role="ref-only">-1</button>
          </div>
          <div class="action-row">
            <button class="btn tall flag-toggle" id="g_flagToggle" data-role="ref-only" aria-pressed="false">Flag</button>
            <button class="btn tall" id="g_downReset" data-role="ref-only">First Down</button>
          </div>
          <div class="action-row action-row--single">
            <button class="btn tall warn" id="g_turnover" data-role="ref-only">Turnover</button>
          </div>
        </div>

      </div>
    </section>

    <section class="page" data-page="schedule" aria-labelledby="scheduleTitle">
      <div class="static-page">
        <h1 id="scheduleTitle">Schedule</h1>
        <p class="empty-state" role="status">No Games Available</p>
      </div>
    </section>

    <section class="page" data-page="profile" aria-labelledby="profileTitle">
      <div class="static-page">
        <h1 id="profileTitle">Profile</h1>
        <button class="profile-sign-out" id="profileSignOut" type="button">Sign out</button>
      </div>
    </section>

  </div>

  <nav class="bottom-nav" aria-label="Primary">
    <button class="bottom-nav__item is-active" type="button" data-page="game" data-view="ref" aria-pressed="true">
      <span class="bottom-nav__label">Ref</span>
    </button>
    <button class="bottom-nav__item" type="button" data-page="game" data-view="player" aria-pressed="false">
      <span class="bottom-nav__label">Watch</span>
    </button>
    <button class="bottom-nav__item" type="button" data-page="schedule" aria-pressed="false">
      <span class="bottom-nav__label">Schedule</span>
    </button>
    <button class="bottom-nav__item" type="button" data-page="profile" aria-pressed="false">
      <span class="bottom-nav__label">Profile</span>
    </button>
  </nav>

<script src="scripts/modules/state.js"></script>
<script src="scripts/modules/remote.js"></script>
<script src="scripts/modules/ui.js"></script>
<script src="scripts/modules/controls.js"></script>
<script src="scripts/main.js"></script>

<script src="scripts/triggers.js"></script>

</body>
</html>
