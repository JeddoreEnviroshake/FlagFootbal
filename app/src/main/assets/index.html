<!-- Local HTML template loaded by WebView; replace its contents to customize the app. -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Flag Football Tracker (Touch)</title>
  <link rel="stylesheet" href="styles/app.css" />

  <!-- Firebase (compat) SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

  <script src="scripts/firebase-init.js"></script>


</head>
<body>
<script src="scripts/error-handler.js"></script>

  <header class="topbar">
    <button class="menu-toggle" id="menuToggle" aria-label="Open menu" aria-expanded="false">☰</button>
    <div class="topbar-title">Synqro Game Tracker</div>
    <div class="view-picker" id="viewPicker" data-open="false">
      <button class="view-indicator" id="viewIndicator" type="button" aria-haspopup="true" aria-expanded="false" aria-controls="viewPickerMenu">
        <span id="viewIndicatorLabel">Referee</span>
      </button>
      <div class="view-picker__menu" id="viewPickerMenu" role="menu" aria-labelledby="viewIndicator" hidden>
        <button class="view-picker__option is-active" type="button" role="menuitemradio" aria-checked="true" data-page="game" data-view="ref" data-view-key="referee">Referee</button>
        <button class="view-picker__option" type="button" role="menuitemradio" aria-checked="false" data-page="game" data-view="player" data-view-key="scoreboard">Scoreboard</button>
        <button class="view-picker__option" type="button" role="menuitemradio" aria-checked="false" data-page="statistician" data-view-key="statistician">Statistician</button>
      </div>
    </div>
  </header>

  <nav class="drawer" id="menuDrawer" aria-hidden="true">
    <div class="drawer-section">
      <h2>Live sync</h2>
      <form id="syncForm">
        <label for="syncGame">Game code</label>
        <input id="syncGame" name="game" type="text" placeholder="e.g. week1-field1" />
        <button class="save" type="submit">Connect</button>
      </form>
      <button class="secondary" type="button" id="syncDisconnect">Disconnect</button>
      <p class="drawer-note">
        Enter a game code to join or host a game. Everyone connected can manage the game.
      </p>
      <div class="sync-status" id="syncStatus" role="status">Offline</div>

    </div>
  </nav>
  <div class="drawer-backdrop" id="menuBackdrop" tabindex="-1" aria-hidden="true"></div>

  <div class="app">
    <section class="page active" data-page="game">

      <div class="game-board">
        <div class="scoreboard-shell">
          <div class="scoreboard">
            <section class="team-card" id="teamCard0"></section>

            <div class="clock-card">
              <div class="banner" id="timeoutBanner" style="display:none;">Timeout — <span id="timeoutTeam"></span> <span id="timeoutTime">1:00</span></div>
              <div class="clock-tiles">
                <div class="clock-tile">
                  <div class="time" id="gameTime" title="Tap to edit when paused">25:00</div>
                </div>
                <div class="down-tile">
                  <div class="down-controls">
                    <div class="down-label" aria-hidden="true">Down</div>
                    <div class="down-value" id="downValue" aria-live="polite">1</div>
                  </div>
                </div>
              </div>
              <div class="girl-indicator">
                <div class="girl-track" id="girlPlayTrack" aria-hidden="true">
                  <span></span>
                  <span></span>
                </div>
                <span id="girlPlayText" class="sr-only">Girl play in 2</span>
              </div>
            </div>

            <section class="team-card" id="teamCard1"></section>
          </div>
        </div>

        <div class="control-carousel" id="controlCarousel" data-active-index="0">
          <div class="control-track">
            <div class="control-panel is-active" data-panel-index="0" aria-label="Clock controls" aria-hidden="false">
              <div class="clock-actions">
                <div class="action-stack">
                  <button class="btn" id="timeoutHome" data-role="ref-only">Timeout</button>
                  <button class="btn" id="blitzHome" data-role="ref-only">Blitz</button>
                </div>
                <button class="btn primary start-btn" id="clockStartPause" data-role="ref-only">Start</button>
                <div class="action-stack">
                  <button class="btn" id="timeoutAway" data-role="ref-only">Timeout</button>
                  <button class="btn" id="blitzAway" data-role="ref-only">Blitz</button>
                </div>
              </div>
            </div>
            <div class="control-panel" data-panel-index="1" aria-label="Manual adjustments" aria-hidden="true">
              <div class="manual-adjust" data-role="ref-only">
                <div class="adjust-card" data-kind="timeouts">
                  <div class="adjust-title">Timeout</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="timeouts" data-adjust="-1" aria-label="Decrease timeouts">-</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="timeouts" data-adjust="1" aria-label="Increase timeouts">+</button>
                  </div>
                </div>
                <div class="adjust-card" data-kind="rushes">
                  <div class="adjust-title">Blitz</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="rushes" data-adjust="-1" aria-label="Decrease blitzes">-</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="rushes" data-adjust="1" aria-label="Increase blitzes">+</button>
                  </div>
                </div>
                <div class="adjust-card" data-kind="girlPlay">
                  <div class="adjust-title">Girl Play</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="girlPlay" data-adjust="-1" aria-label="Decrease girl plays">-</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="girlPlay" data-adjust="1" aria-label="Increase girl plays">+</button>
                  </div>
                </div>
                <div class="adjust-card" data-kind="downs">
                  <div class="adjust-title">Down</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="downs" data-adjust="-1" aria-label="Previous down">-</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="downs" data-adjust="1" aria-label="Next down">+</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="score-actions" data-role="ref-only">
          <div class="score-row">
            <button class="btn primary" id="g_score6" data-role="ref-only">+6</button>
            <button class="btn" id="g_score1" data-role="ref-only">+1</button>
            <button class="btn warn" id="g_scorem1" data-role="ref-only">-1</button>
          </div>
          <div class="action-row">
            <button class="btn tall flag-toggle" id="g_flagToggle" data-role="ref-only" aria-pressed="false">Flag</button>
            <button class="btn tall" id="g_downReset" data-role="ref-only">First Down</button>
          </div>
          <div class="action-row action-row--single">
            <button class="btn tall warn" id="g_turnover" data-role="ref-only">Turnover</button>
          </div>
        </div>

      </div>
    </section>

    <section class="page" data-page="schedule" aria-labelledby="scheduleTitle">
      <div class="static-page">
        <h1 id="scheduleTitle">Schedule</h1>
        <p class="empty-state" role="status">No Games Available</p>
      </div>
    </section>

    <section class="page" data-page="statistician" aria-labelledby="statisticianTitle">
      <div class="static-page">
        <h1 id="statisticianTitle">Statistician</h1>
        <p class="empty-state" role="status">Statistician Not Yet Available</p>
      </div>
    </section>

    <section class="page" data-page="teams" aria-labelledby="teamsTitle">
      <div class="static-page">
        <h1 id="teamsTitle">Teams</h1>
        <p class="empty-state" role="status">Teams No Teams Available</p>
      </div>
    </section>

    <section class="page" data-page="profile" aria-labelledby="profileTitle">
      <div class="static-page profile-page">
        <h1 id="profileTitle">Profile</h1>

        <button class="profile-card" id="profileOverview" type="button" aria-haspopup="dialog" aria-controls="profileEditor">
          <div class="profile-card__main">
            <div class="profile-card__avatar" id="profileAvatar" aria-hidden="true">
              <span>Add Image</span>
            </div>
            <div class="profile-card__details">
              <div class="profile-card__name" id="profileFirstName">Name</div>
              <div class="profile-card__team" id="profileTeamName">Team</div>
              <div class="profile-card__location" id="profileLocation">City, Province</div>
            </div>
          </div>
          <div class="profile-card__stats" aria-hidden="true">
            <div class="profile-card__stat">
              <div class="profile-card__stat-value">1st</div>
              <div class="profile-card__stat-label">Standing</div>
            </div>
            <div class="profile-card__stat">
              <div class="profile-card__stat-value">Top 25</div>
              <div class="profile-card__stat-label">Player Rank</div>
            </div>
            <div class="profile-card__stat">
              <div class="profile-card__stat-value">Sunday @ 10:00 AM</div>
              <div class="profile-card__stat-label">Next Game</div>
            </div>
          </div>
        </button>

        <button class="profile-sign-out" id="profileSignOut" type="button">Sign out</button>
      </div>

      <div class="profile-sheet" id="profileEditor" aria-hidden="true" data-open="false">
        <div class="profile-sheet__backdrop" data-profile-close></div>
        <div class="profile-sheet__panel" role="dialog" aria-modal="true" aria-labelledby="profileEditorTitle" tabindex="-1">
          <header class="profile-sheet__header">
            <h2 id="profileEditorTitle">Edit profile</h2>
            <button class="profile-sheet__close" type="button" data-profile-close aria-label="Close profile editor"></button>
          </header>
          <form id="profileForm" class="profile-form">
            <div class="profile-form__group">
              <label class="profile-form__label">Profile picture</label>
              <div class="profile-photo-field">
                <div class="profile-photo-field__preview" id="profilePhotoPreview">
                  <span>Add Image</span>
                </div>
                <div class="profile-photo-field__actions">
                  <label class="profile-photo-field__button" for="profilePhotoInput">
                    <input id="profilePhotoInput" type="file" accept="image/*" />
                    Upload photo
                  </label>
                  <button class="profile-photo-field__clear" id="profilePhotoClear" type="button">Remove photo</button>
                </div>
              </div>
            </div>

            <div class="profile-form__group">
              <label class="profile-form__label" for="profileFirstNameInput">First name</label>
              <input class="profile-form__input" id="profileFirstNameInput" name="firstName" type="text" placeholder="Name" autocomplete="given-name" />
            </div>

            <div class="profile-form__group">
              <label class="profile-form__label" for="profileTeamInput">Team</label>
              <input class="profile-form__input" id="profileTeamInput" name="team" type="text" placeholder="Team" autocomplete="organization" />
            </div>

            <div class="profile-form__grid">
              <div class="profile-form__group">
                <label class="profile-form__label" for="profileCityInput">City</label>
                <input class="profile-form__input" id="profileCityInput" name="city" type="text" placeholder="City" autocomplete="address-level2" />
              </div>
              <div class="profile-form__group">
                <label class="profile-form__label" for="profileProvinceInput">Province</label>
                <input class="profile-form__input" id="profileProvinceInput" name="province" type="text" placeholder="Province" autocomplete="address-level1" />
              </div>
            </div>

            <div class="profile-sheet__actions">
              <button class="profile-sheet__button profile-sheet__button--secondary" type="button" data-profile-close>Cancel</button>
              <button class="profile-sheet__button profile-sheet__button--primary" type="submit">Save changes</button>
            </div>
          </form>
        </div>
      </div>
    </section>

  </div>

  <nav class="bottom-nav" aria-label="Primary">
    <button class="bottom-nav__item is-active" type="button" data-page="game" data-view="ref" aria-pressed="true">
      <span class="bottom-nav__label">Game</span>
    </button>
    <button class="bottom-nav__item" type="button" data-page="teams" aria-pressed="false">
      <span class="bottom-nav__label">Teams</span>
    </button>
    <button class="bottom-nav__item" type="button" data-page="schedule" aria-pressed="false">
      <span class="bottom-nav__label">Schedule</span>
    </button>
    <button class="bottom-nav__item" type="button" data-page="profile" aria-pressed="false">
      <span class="bottom-nav__label">Profile</span>
    </button>
  </nav>

<script src="scripts/modules/state.js"></script>
<script src="scripts/modules/remote.js"></script>
<script src="scripts/modules/ui.js"></script>
<script src="scripts/modules/controls.js"></script>
<script src="scripts/main.js"></script>

<script src="scripts/triggers.js"></script>

</body>
</html>
