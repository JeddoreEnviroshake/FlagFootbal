<!-- Local HTML template loaded by WebView; replace its contents to customize the app. -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Flag Football Tracker (Touch)</title>
  <link rel="stylesheet" href="styles/app.css" />

  <!-- Firebase (compat) SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

  <script src="scripts/firebase-init.js"></script>


</head>
<body>
  <header class="topbar">
    <button class="menu-toggle" id="menuToggle" aria-label="Open menu" aria-expanded="false">☰</button>
    <div class="topbar-title">Synqro Game Tracker</div>
    <div class="view-picker" id="viewPicker" data-open="false">
      <button class="view-indicator" id="viewIndicator" type="button" aria-haspopup="true" aria-expanded="false" aria-controls="viewPickerMenu">
        <span id="viewIndicatorLabel">Referee</span>
      </button>
      <div class="view-picker__menu" id="viewPickerMenu" role="menu" aria-labelledby="viewIndicator" hidden></div>
    </div>
  </header>

  <nav class="drawer" id="menuDrawer" aria-hidden="true">
    <div class="drawer-section">
      <h2>Live sync</h2>
      <form id="syncForm">
        <label for="syncGame">Game code</label>
        <input id="syncGame" name="game" type="text" placeholder="e.g. week1-field1" />
        <button class="save" type="submit">Connect</button>
      </form>
      <button class="secondary" type="button" id="syncDisconnect">Disconnect</button>
      <p class="drawer-note">
        Enter a game code to join or host a game. Everyone connected can manage the game.
      </p>
      <div class="sync-status" id="syncStatus" role="status">Offline</div>

    </div>
    <div class="drawer-section">
      <h2>Timing</h2>
      <form id="timingSettingsForm" novalidate>
        <label for="segmentLengthInput">Segment Length (minutes)</label>
        <input id="segmentLengthInput" name="segmentLength" type="number" step="0.1" min="0.1" inputmode="decimal" autocomplete="off" aria-describedby="timingSettingsNote" placeholder="25" />

        <label for="intermissionLengthInput">Intermission Length (minutes)</label>
        <input id="intermissionLengthInput" name="intermissionLength" type="number" step="0.1" min="0.1" inputmode="decimal" autocomplete="off" aria-describedby="timingSettingsNote" placeholder="5" />

        <label for="timeoutLengthInput">Timeout Length (minutes)</label>
        <input id="timeoutLengthInput" name="timeoutLength" type="number" step="0.1" min="0.1" inputmode="decimal" autocomplete="off" aria-describedby="timingSettingsNote" placeholder="0.5" />
      </form>
      <button class="secondary" type="button" id="intermissionBtn" data-role="ref-only">Intermission</button>
      <p class="drawer-note" id="timingSettingsNote">
        These values determine the default countdowns for each game segment and intermission.
      </p>
    </div>
  </nav>
  <div class="drawer-backdrop" id="menuBackdrop" tabindex="-1" aria-hidden="true"></div>

  <div class="app">
    <section class="page active" data-page="game">

      <div class="game-board">
        <div class="scoreboard-shell">
          <div class="scoreboard">
            <section class="team-card" id="teamCard0"></section>

            <div class="clock-card">
              <div class="banner" id="intermissionBanner" style="display:none;">Intermission <span id="intermissionTime">5:00</span></div>
              <div class="banner" id="timeoutBanner" style="display:none;">Timeout — <span id="timeoutTeam"></span> <span id="timeoutTime">1:00</span></div>
              <div class="clock-tiles">
                <div class="clock-tile">
                  <div class="time" id="gameTime" title="Tap to edit when paused">25:00</div>
                </div>
                <div class="down-tile">
                  <div class="down-controls">
                    <div class="down-label" aria-hidden="true">Down</div>
                    <div class="down-value" id="downValue" aria-live="polite">1</div>
                  </div>
                </div>
              </div>
              <div class="girl-indicator">
                <div class="girl-track" id="girlPlayTrack" aria-hidden="true">
                  <span></span>
                  <span></span>
                </div>
                <span id="girlPlayText" class="sr-only">Girl play in 2</span>
              </div>
            </div>

            <section class="team-card" id="teamCard1"></section>
          </div>
        </div>

        <div class="control-carousel" id="controlCarousel" data-active-index="0">
          <div class="control-track">
            <div class="control-panel is-active" data-panel-index="0" aria-label="Clock controls" aria-hidden="false">
              <div class="clock-actions">
                <div class="action-stack">
                  <button class="btn" id="timeoutHome" data-role="ref-only">Timeout</button>
                  <button class="btn" id="blitzHome" data-role="ref-only">Blitz</button>
                </div>
                <button class="btn primary start-btn" id="clockStartPause" data-role="ref-only">Start</button>
                <div class="action-stack">
                  <button class="btn" id="timeoutAway" data-role="ref-only">Timeout</button>
                  <button class="btn" id="blitzAway" data-role="ref-only">Blitz</button>
                </div>
              </div>
            </div>
            <div class="control-panel" data-panel-index="1" aria-label="Manual adjustments" aria-hidden="true">
              <div class="manual-adjust" data-role="ref-only">
                <div class="adjust-card" data-kind="timeouts">
                  <div class="adjust-title">Timeout</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="timeouts" data-adjust="1" aria-label="Increase timeouts">+</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="timeouts" data-adjust="-1" aria-label="Decrease timeouts">-</button>
                  </div>
                </div>
                <div class="adjust-card" data-kind="rushes">
                  <div class="adjust-title">Blitz</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="rushes" data-adjust="1" aria-label="Increase blitzes">+</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="rushes" data-adjust="-1" aria-label="Decrease blitzes">-</button>
                  </div>
                </div>
                <div class="adjust-card" data-kind="girlPlay">
                  <div class="adjust-title">Girl Play</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="girlPlay" data-adjust="1" aria-label="Increase girl plays">+</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="girlPlay" data-adjust="-1" aria-label="Decrease girl plays">-</button>
                  </div>
                </div>
                <div class="adjust-card" data-kind="downs">
                  <div class="adjust-title">Down</div>
                  <div class="adjust-buttons">
                    <button class="adjust-btn" data-role="ref-only" data-kind="downs" data-adjust="1" aria-label="Next down">+</button>
                    <button class="adjust-btn" data-role="ref-only" data-kind="downs" data-adjust="-1" aria-label="Previous down">-</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="score-actions" data-role="ref-only">
          <div class="score-row">
            <button class="btn primary" id="g_score6" data-role="ref-only">+6</button>
            <button class="btn" id="g_score1" data-role="ref-only">+1</button>
            <button class="btn warn" id="g_scorem1" data-role="ref-only">-1</button>
          </div>
          <div class="action-row">
            <button class="btn tall flag-toggle" id="g_flagToggle" data-role="ref-only" aria-pressed="false">Flag</button>
            <button class="btn tall" id="g_downReset" data-role="ref-only">First Down</button>
          </div>
          <div class="action-row action-row--single">
            <button class="btn tall warn" id="g_turnover" data-role="ref-only">Turnover</button>
          </div>
        </div>

      </div>

    </section>

    <section class="page" data-page="schedule" aria-labelledby="scheduleTitle">
      <div class="static-page">
        <h1 id="scheduleTitle">Schedule</h1>
      </div>
    </section>

    <section class="page" data-page="statistician" aria-labelledby="statisticianTitle">
      <div class="statistician-page" id="statisticianPage">
        <header class="statistician-page__header">
          <h1 id="statisticianTitle">Statistician</h1>
          <p class="statistician-status" id="statisticianStatus" role="status"></p>
        </header>

        <div class="statistician-tabs" id="statisticianTabs" role="tablist" aria-label="Statistician views">
          <button class="statistician-tab is-active" type="button" role="tab" aria-selected="true" aria-controls="statisticianGameTab" id="statisticianTabGame" data-stat-tab="game">Game</button>
          <button class="statistician-tab" type="button" role="tab" aria-selected="false" aria-controls="statisticianSeasonTab" id="statisticianTabSeason" data-stat-tab="season">Season</button>
        </div>

        <div class="statistician-panels">
          <section class="statistician-panel is-active" id="statisticianGameTab" role="tabpanel" tabindex="0" aria-labelledby="statisticianTabGame" data-stat-panel="game">
            <div class="statistician-game" id="statisticianTeamTotals"></div>
          </section>
          <section class="statistician-panel" id="statisticianSeasonTab" role="tabpanel" tabindex="0" aria-labelledby="statisticianTabSeason" data-stat-panel="season">
            <p class="statistician-placeholder">Season stats are coming soon.</p>
          </section>
        </div>
      </div>
    </section>

    <section class="page" data-page="teams" aria-labelledby="teamsTitle">
      <div class="teams-page" id="teamsPage">
        <header class="teams-page__header">
          <h1 id="teamsTitle">Teams</h1>
          <p class="teams-status" id="teamsPageStatus" role="status">No teams yet.</p>
        </header>

        <div class="teams-content">
          <div class="teams-directory">
            <div class="teams-grid" id="teamsDirectoryList" role="list"></div>

            <div class="teams-actions">
              <button class="teams-actions__add btn-inline primary" id="teamsAddTeam" type="button">Add Team</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="page" data-page="teamPlayers" aria-labelledby="teamDetailsTitle">
      <div class="team-details-page" id="teamDetailsPage">
        <header class="team-details-header">
          <button class="team-details-back" id="teamDetailsBack" type="button" aria-label="Back to teams">Back</button>
          <h1 class="team-details-title" id="teamDetailsTitle">Team</h1>
        </header>

        <p class="team-details-status" id="teamDetailsStatus" role="status">Select a team to view players.</p>

        <div class="team-details-content">
          <section class="team-player-panel" id="teamPlayerTile" aria-live="polite"></section>
          <section class="team-details-list" aria-label="Players" id="teamDetailsPlayerList" role="listbox"></section>

          <!-- New actions row at the bottom -->
          <div class="team-details-actions">
            <button class="teams-add-player" id="teamDetailsAddPlayer" type="button" disabled>Add Player</button>
          </div>
        </div>
    </section>

    <section class="page" data-page="profile" aria-labelledby="profileTitle">
      <div class="static-page profile-page">
        <h1 id="profileTitle">Profile</h1>

        <button class="profile-card" id="profileOverview" type="button" aria-haspopup="dialog" aria-controls="profileEditor">
          <div class="profile-card__main">
            <div class="profile-card__avatar" id="profileAvatar" aria-hidden="true">
              <span>Add Image</span>
            </div>
            <div class="profile-card__details">
              <div class="profile-card__name" id="profileFirstName">Name</div>
              <div class="profile-card__team" id="profileTeamName">Team</div>
              <div class="profile-card__league" id="profileLeagueName">League</div>
              <div class="profile-card__location" id="profileLocation">City, Province</div>
            </div>
          </div>
          <div class="profile-card__stats" aria-hidden="true">
            <div class="profile-card__stat">
              <div class="profile-card__stat-value">1st</div>
              <div class="profile-card__stat-label">Standing</div>
            </div>
            <div class="profile-card__stat">
              <div class="profile-card__stat-value">Top 25</div>
              <div class="profile-card__stat-label">Player Rank</div>
            </div>
            <div class="profile-card__stat">
              <div class="profile-card__stat-value">Sunday @ 10:00 AM</div>
              <div class="profile-card__stat-label">Next Game</div>
            </div>
          </div>
        </button>
      </div>

      <div class="profile-sheet" id="profileEditor" aria-hidden="true" data-open="false">
        <div class="profile-sheet__backdrop" data-profile-close></div>
        <div class="profile-sheet__panel" role="dialog" aria-modal="true" aria-labelledby="profileEditorTitle" tabindex="-1">
          <header class="profile-sheet__header">
            <h2 id="profileEditorTitle">Profile</h2>
            <button class="profile-sheet__close" type="button" data-profile-close aria-label="Close profile editor"></button>
          </header>
          <form id="profileForm" class="profile-form">
            <div class="profile-form__group">
              <label class="profile-form__label">Profile picture</label>
              <div class="profile-photo-field">
                <div class="profile-photo-field__preview" id="profilePhotoPreview">
                  <span>Add Image</span>
                </div>
                <div class="profile-photo-field__actions">
                  <label class="profile-photo-field__button" for="profilePhotoInput">
                    <input id="profilePhotoInput" type="file" accept="image/*" />
                    Upload photo
                  </label>
                  <button class="profile-photo-field__clear" id="profilePhotoClear" type="button">Remove photo</button>
                </div>
              </div>
            </div>

            <div class="profile-form__group">
              <span class="profile-form__label sr-only" id="profileFirstNameLabel">First name</span>
              <button
                class="profile-form__field-button"
                type="button"
                data-profile-field="firstName"
                data-profile-field-title="First name"
                data-profile-field-name="first name"
                data-profile-field-placeholder="Name"
                aria-labelledby="profileFirstNameLabel profileFirstNameValue"
              >
                <span class="profile-form__field-value is-placeholder" id="profileFirstNameValue" data-profile-field-value="firstName">Name</span>
                <span class="profile-form__field-chevron" aria-hidden="true"></span>
              </button>
            </div>

            <div class="profile-form__group">
              <span class="profile-form__label sr-only" id="profileTeamLabel">Team</span>
              <button
                class="profile-form__field-button"
                type="button"
                data-profile-field="teamName"
                data-profile-field-title="Team"
                data-profile-field-name="team name"
                data-profile-field-placeholder="Team"
                aria-labelledby="profileTeamLabel profileTeamValue"
              >
                <span class="profile-form__field-value is-placeholder" id="profileTeamValue" data-profile-field-value="teamName">Team</span>
                <span class="profile-form__field-chevron" aria-hidden="true"></span>
              </button>
            </div>

            <div class="profile-form__group">
              <span class="profile-form__label sr-only" id="profileLeagueLabel">League</span>
              <button
                class="profile-form__field-button"
                type="button"
                data-profile-field="league"
                data-profile-field-title="League"
                data-profile-field-name="league"
                data-profile-field-placeholder="League"
                aria-labelledby="profileLeagueLabel profileLeagueValue"
              >
                <span class="profile-form__field-value is-placeholder" id="profileLeagueValue" data-profile-field-value="league">League</span>
                <span class="profile-form__field-chevron" aria-hidden="true"></span>
              </button>
            </div>

            <div class="profile-form__grid">
              <div class="profile-form__group">
                <span class="profile-form__label sr-only" id="profileCityLabel">City</span>
                <button
                  class="profile-form__field-button"
                  type="button"
                  data-profile-field="city"
                  data-profile-field-title="City"
                  data-profile-field-name="city"
                  data-profile-field-placeholder="City"
                  aria-labelledby="profileCityLabel profileCityValue"
                >
                  <span class="profile-form__field-value is-placeholder" id="profileCityValue" data-profile-field-value="city">City</span>
                  <span class="profile-form__field-chevron" aria-hidden="true"></span>
                </button>
              </div>
              <div class="profile-form__group">
                <span class="profile-form__label sr-only" id="profileProvinceLabel">Province</span>
                <button
                  class="profile-form__field-button"
                  type="button"
                  data-profile-field="province"
                  data-profile-field-title="Province"
                  data-profile-field-name="province"
                  data-profile-field-placeholder="Province"
                  aria-labelledby="profileProvinceLabel profileProvinceValue"
                >
                  <span class="profile-form__field-value is-placeholder" id="profileProvinceValue" data-profile-field-value="province">Province</span>
                  <span class="profile-form__field-chevron" aria-hidden="true"></span>
                </button>
              </div>
            </div>

            <div class="profile-sheet__actions">
              <button class="profile-sheet__button profile-sheet__button--primary" type="submit">Save changes</button>
            </div>
          </form>
        </div>
      </div>

      <div class="profile-field-sheet" id="profileFieldSheet" aria-hidden="true" data-open="false">
        <div class="profile-field-sheet__backdrop" data-profile-field-close></div>
        <div class="profile-field-sheet__panel" role="dialog" aria-modal="true" aria-labelledby="profileFieldTitle" tabindex="-1">
          <header class="profile-field-sheet__header">
            <h2 id="profileFieldTitle">Field</h2>
            <button class="profile-field-sheet__close" type="button" data-profile-field-close aria-label="Close field editor"></button>
          </header>
          <form id="profileFieldForm" class="profile-field-form">
            <p class="profile-field-form__description" id="profileFieldDescription">Please enter your value.</p>
            <label class="profile-field-form__label sr-only" id="profileFieldLabel" for="profileFieldInput">Profile field</label>
            <input class="profile-field-form__input" id="profileFieldInput" type="text" aria-describedby="profileFieldDescription profileFieldHelper" autocomplete="off" />
            <div class="profile-field-form__helper" id="profileFieldHelper">Field helper</div>
            <div class="profile-field-form__actions">
              <button class="profile-sheet__button profile-sheet__button--primary" type="submit">Save</button>
            </div>
          </form>
        </div>
      </div>
    </section>

  </div>

  <nav class="bottom-nav" aria-label="Primary">
    <button class="bottom-nav__item is-active" type="button" data-page="game" data-view="ref" aria-pressed="true">
      <span class="bottom-nav__label">Game</span>
    </button>
    <button class="bottom-nav__item" type="button" data-page="teams" aria-pressed="false">
      <span class="bottom-nav__label">Teams</span>
    </button>
    <button class="bottom-nav__item" type="button" data-page="schedule" aria-pressed="false">
      <span class="bottom-nav__label">Schedule</span>
    </button>
    <button class="bottom-nav__item" type="button" data-page="profile" aria-pressed="false">
      <span class="bottom-nav__label">Profile</span>
    </button>
  </nav>

    <script defer src="scripts/modules/state.js"></script>
    <script defer src="scripts/modules/teams.js"></script>
    <script defer src="scripts/modules/ui.js"></script>
    <script defer src="scripts/modules/schedule.js"></script>
    <script defer src="scripts/error-handler.js"></script>
    <script defer src="scripts/modules/remote.js"></script>
    <script defer src="scripts/modules/controls.js"></script>
    <script defer src="scripts/main.js"></script>
    <script defer src="scripts/triggers.js"></script>



</body>
</html>
